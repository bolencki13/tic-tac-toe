import{h as I,a as x,e as B,g as C}from"./game-D5yP27q4.js";const w=3;function O(n,t,s,f){const u=t==="X"?"O":"X",m=t==="X"?s:f,i=t==="X"?f:s,l=I(n,t);if(l!==null)return l;const c=I(n,u);return c!==null?c:A(n,t,m,i)}function A(n,t,s,f){const u=t==="X"?"O":"X",m=n.map((i,l)=>i===null?l:-1).filter(i=>i!==-1);if(s.length>=w){const i=s[0];let l=-1/0,c=m[0]||0;for(const e of m){const o=[...n];o[i]=null,o[e]=t;const r=[...s.slice(1),e],M=S(o,t,u,r,f,2);M>l&&(l=M,c=e)}return c}else{if(n[4]===null)return 4;const i=x(n,t);if(i!==null)return i;const l=x(n,u);if(l!==null)return l;let c=-1/0,e=m[0]||0;for(const o of m){const r=[...n];r[o]=t;const M=[...s,o],g=S(r,t,u,M,f,2);g>c&&(c=g,e=o)}return e}}function S(n,t,s,f,u,m){if(m===0||L(n))return B(n,t,s,f,u,w);const i=n.map((l,c)=>l===null?c:-1).filter(l=>l!==-1);if(m%2===0){let l=-1/0;for(const c of i){const e=[...n];let o=[...f];if(f.length>=w){const M=f[0];e[M]=null,e[c]=t,o=[...f.slice(1),c]}else e[c]=t,o=[...f,c];const r=S(e,t,s,o,u,m-1);l=Math.max(l,r)}return l}else{let l=1/0;for(const c of i){const e=[...n];let o=[...u];if(u.length>=w){const M=u[0];e[M]=null,e[c]=s,o=[...u.slice(1),c]}else e[c]=s,o=[...u,c];const r=S(e,t,s,f,o,m-1);l=Math.min(l,r)}return l}}function L(n){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const[s,f,u]of t)if(n[s]&&n[s]===n[f]&&n[s]===n[u])return!0;return!1}const h=new Map;function R(n,t,s){return`${n.join("")}|${t}|${s}`}function W(n,t,s="classic",f=[],u=[],m="medium"){if(s==="limited")return O(n,t,f,u);h.size>1e3&&h.clear();const i=n.map((v,X)=>v===null?X:null).filter(v=>v!==null);if(i.length===0)return-1;if(i.length===1)return i[0];const l=t==="X"?"O":"X",c=I(n,t);if(c!==null)return c;const e=I(n,l);if(e!==null)return e;const o=C(n);if(o!==null){if(m==="hard"&&Math.random()<.9)return o;if(m==="medium"&&Math.random()<.5)return o}const r=x(n,t);if(r!==null)return r;const M=x(n,l);if(M!==null)return M;if(n[4]===null)return 4;let g=-1,k=-1/0;for(const v of i){n[v]=t;const X=p(n,0,!1,t,l);n[v]=null,X>k&&(k=X,g=v)}return g}function p(n,t,s,f,u,m=-1/0,i=1/0){const l=R(n,s,t);if(h.has(l))return h.get(l);const c=E(n);if(c!==null){const e=c===f?10-t:t-10;return h.set(l,e),e}if(!n.includes(null))return h.set(l,0),0;if(s){let e=-1/0;for(let o=0;o<n.length;o++)if(n[o]===null){n[o]=f;const r=p(n,t+1,!1,f,u,m,i);if(n[o]=null,e=Math.max(r,e),m=Math.max(m,e),i<=m)break}return h.set(l,e),e}else{let e=1/0;for(let o=0;o<n.length;o++)if(n[o]===null){n[o]=u;const r=p(n,t+1,!0,f,u,m,i);if(n[o]=null,e=Math.min(r,e),i=Math.min(i,e),i<=m)break}return h.set(l,e),e}}function E(n){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const[s,f,u]of t)if(n[s]&&n[s]===n[f]&&n[s]===n[u])return n[s];return null}function _(n,t="O",s="classic",f=[],u=[]){const m=t==="X"?"O":"X",i=I(n,t);if(i!==null&&Math.random()>.2)return i;const l=I(n,m);if(l!==null&&Math.random()>.5)return l;if(s==="limited"&&(t==="X"?f:u).length>=3){const M=n.map((g,k)=>g===null?k:null).filter(g=>g!==null);if(M.length>0){const g=Math.floor(Math.random()*M.length);return M[g]}}const c=n.map((r,M)=>r===null?M:null).filter(r=>r!==null);if(c.length===0)return-1;const e=[4,0,2,6,8].filter(r=>n[r]===null);if(e.length>0&&Math.random()>.5){const r=Math.floor(Math.random()*e.length);return e[r]}const o=Math.floor(Math.random()*c.length);return c[o]}export{_ as a,W as f};
//# sourceMappingURL=utils-D3OVl5Gg.js.map
