import{r as d,b as j,j as e,c as y}from"./game-D5yP27q4.js";import"./react-1zw1pNgy.js";import"./utils-D3OVl5Gg.js";function P({isOpen:i,onClose:c,difficulty:n,setDifficulty:r,gameMode:m}){const[a,o]=d.useState(null),[l,h]=d.useState(!1);d.useEffect(()=>{i&&o(j())},[i]);const u=()=>{h(!0),setTimeout(()=>{y(),o(j()),h(!1)},300)};if(!i)return null;const p=s=>s?new Date(s).toLocaleString():"Never",b=()=>{if(!a||!a.bandit)return null;const s=a.bandit;return!s.strategies||!Array.isArray(s.strategies)?e.jsx("p",{children:"No strategy data available"}):e.jsxs("div",{className:"stats-section",children:[e.jsx("h3",{children:"Strategy Performance"}),e.jsx("div",{className:"stats-table-container",children:e.jsxs("table",{className:"stats-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Strategy"}),e.jsx("th",{children:"Win Rate"}),e.jsx("th",{children:"Wins"}),e.jsx("th",{children:"Losses"}),e.jsx("th",{children:"Draws"})]})}),e.jsx("tbody",{children:s.strategies.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsxs("td",{children:[(t.winRate*100).toFixed(1),"%"]}),e.jsx("td",{children:t.wins}),e.jsx("td",{children:t.losses}),e.jsx("td",{children:t.draws})]},t.name))})]})}),e.jsxs("p",{className:"stats-note",children:["Current strategy: ",s.currentStrategy||"None"]})]})},v=()=>{if(!a||!a.bayesian)return null;const s=a.bayesian;return!s.totalPatterns||s.totalPatterns<=0?e.jsx("p",{children:"No pattern data available"}):e.jsxs("div",{className:"stats-section",children:[e.jsx("h3",{children:"Pattern Recognition"}),e.jsxs("p",{children:["Total patterns learned: ",e.jsx("strong",{children:s.totalPatterns})]}),s.patternDetails&&s.patternDetails.length>0&&e.jsxs("div",{className:"pattern-preview",children:[e.jsx("h4",{children:"Top Patterns:"}),e.jsx("ul",{className:"pattern-list",children:s.patternDetails.slice(0,3).map((t,S)=>e.jsxs("li",{children:[e.jsx("div",{className:"mini-board",children:t.boardState.split("").map((x,f)=>e.jsx("div",{className:"mini-cell",children:x!=="-"?x:""},f))}),e.jsxs("div",{className:"pattern-info",children:[e.jsxs("span",{children:["Observations: ",t.observations]}),t.probabilities&&t.probabilities.length>0&&e.jsxs("span",{children:["Predicted: ",t.probabilities[0].move,"(",(t.probabilities[0].probability*100).toFixed(0),"%)"]})]})]},S))})]})]})},N=()=>a?e.jsxs("div",{className:"stats-section",children:[e.jsx("h3",{children:"Data Persistence"}),e.jsxs("p",{children:["Last saved: ",e.jsx("strong",{children:p(a.persistence.lastSavedTimestamp)})]}),e.jsxs("p",{children:["Bandit data: ",e.jsx("strong",{children:a.persistence.hasSavedBanditData?"Saved":"Not Saved"})]}),e.jsxs("p",{children:["Pattern data: ",e.jsx("strong",{children:a.persistence.hasSavedBayesianData?"Saved":"Not Saved"})]}),a.persistence.error&&e.jsxs("p",{className:"error-text",children:["Error: ",a.persistence.error]})]}):null,g=()=>m!=="single"||!r||!n?null:e.jsxs("div",{className:"stats-section",children:[e.jsx("h3",{children:"Game Difficulty"}),e.jsx("p",{children:"Select the AI opponent difficulty level:"}),e.jsxs("div",{className:"difficulty-buttons modal-difficulty-buttons",children:[e.jsx("button",{className:`difficulty-button ${n==="easy"?"active":""}`,onClick:()=>r("easy"),children:"Easy"}),e.jsx("button",{className:`difficulty-button ${n==="medium"?"active":""}`,onClick:()=>r("medium"),children:"Medium"}),e.jsx("button",{className:`difficulty-button ${n==="hard"?"active":""}`,onClick:()=>r("hard"),children:"Hard"})]}),n==="hard"&&e.jsx("p",{className:"settings-note",children:"Hard mode enables AI learning to adapt to your play style."})]});return e.jsx("div",{className:"modal-overlay",onClick:c,children:e.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:n==="hard"?"Game & AI Learning Settings":"Game Settings"}),e.jsx("button",{className:"close-button",onClick:c,children:"Ã—"})]}),e.jsxs("div",{className:"modal-body",children:[g(),n==="hard"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"settings-description",children:e.jsx("p",{children:"In Hard mode, the AI uses advanced algorithms to learn from your play style and adapt its strategy to counter your moves more effectively over time."})}),e.jsxs("div",{className:"stats-container",children:[b(),v(),N()]}),e.jsxs("div",{className:"reset-section",children:[e.jsx("h3",{children:"Reset Learning Data"}),e.jsx("p",{children:"This will reset all AI learning data and start fresh. This cannot be undone."}),e.jsx("button",{className:`reset-button ${l?"resetting":""}`,onClick:u,disabled:l,children:l?"Resetting...":"Reset AI Learning"})]})]})]})]})})}const I={SettingsModal:P};export{P as SettingsModal,I as default};
//# sourceMappingURL=index-COwPcewv.js.map
